# BSC链可视化项目架构设计

## 系统架构概述

BSC链可视化项目采用前后端分离的架构设计，由以下主要部分组成：

1. **前端应用**：基于React的单页面应用，提供用户界面和交互功能
2. **后端API服务**：基于FastAPI的RESTful API服务，处理数据请求和业务逻辑
3. **区块链交互层**：负责与BSC区块链节点通信，获取和处理区块链数据
4. **WebSocket服务**：提供实时数据更新功能

## 架构图

```
+------------------+        +------------------+        +------------------+
|                  |        |                  |        |                  |
|   前端应用        | <----> |   后端API服务    | <----> |   BSC区块链节点   |
|   (React)        |  HTTP  |   (FastAPI)      |  Web3  |                  |
|                  |        |                  |        |                  |
+------------------+        +------------------+        +------------------+
         ^                          |
         |                          |
         |                          v
         |                  +------------------+
         |                  |                  |
         +----------------> |   WebSocket服务  |
          实时数据更新      |                  |
                           +------------------+
```

## 目录结构

```
bsc/
├── README.md                 # 项目说明文档
├── doc/                      # 项目文档
├── backend/                  # 后端API服务
│   ├── __init__.py           # 包初始化文件
│   ├── api.py                # API路由和处理函数
│   ├── blockchain.py         # BSC区块链交互逻辑
│   └── models.py             # 数据模型定义
└── frontend/                 # 前端React应用
    ├── public/               # 静态资源
    ├── src/                  # 源代码
    │   ├── components/       # UI组件
    │   │   ├── BlockExplorer.jsx    # 区块浏览器组件
    │   │   ├── TransactionList.jsx  # 交易列表组件
    │   │   ├── WalletManager.jsx    # 钱包管理组件
    │   │   ├── ContractInteraction.jsx # 合约交互组件
    │   │   ├── Dashboard.jsx        # 仪表盘组件
    │   │   └── Navbar.jsx           # 导航栏组件
    │   ├── services/        # 服务和API调用
    │   │   └── api.js       # API调用函数
    │   ├── App.jsx          # 主应用组件
    │   └── index.jsx        # 应用入口
    └── package.json         # 依赖配置
```

## 组件设计

### 前端组件

前端采用组件化设计，主要组件包括：

1. **App.jsx**：应用根组件，负责路由管理和全局状态
2. **Navbar.jsx**：导航栏组件，提供页面导航功能
3. **Dashboard.jsx**：仪表盘组件，展示BSC网络概览信息
4. **BlockExplorer.jsx**：区块浏览器组件，展示和查询区块信息
5. **TransactionList.jsx**：交易列表组件，展示和查询交易信息
6. **WalletManager.jsx**：钱包管理组件，处理钱包连接和交易发送
7. **ContractInteraction.jsx**：合约交互组件，提供合约调用功能

### 后端模块

后端采用模块化设计，主要模块包括：

1. **api.py**：定义API路由和处理函数，包括RESTful API和WebSocket端点
2. **blockchain.py**：实现与BSC区块链的交互逻辑，包括区块、交易、账户和合约相关操作
3. **models.py**：定义数据模型和验证逻辑

## 数据流

### 区块数据流

1. 用户在前端请求区块数据
2. 前端通过API服务发送请求
3. 后端接收请求并调用区块链交互层获取数据
4. 区块链交互层从BSC节点获取区块数据
5. 数据经过处理后返回给前端
6. 前端渲染并展示区块数据

### 实时数据更新流

1. 用户连接到WebSocket服务
2. 后端定期从BSC节点获取最新数据
3. 当有新数据时，通过WebSocket推送给前端
4. 前端接收数据并更新界面

### 合约交互流

1. 用户在前端输入合约地址和ABI
2. 前端解析ABI并展示合约函数
3. 用户选择函数并输入参数
4. 前端通过API服务发送合约调用请求
5. 后端接收请求并调用区块链交互层执行合约调用
6. 调用结果返回给前端并展示